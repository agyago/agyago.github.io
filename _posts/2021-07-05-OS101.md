---
layout: post
description: Operating System 101
tags: OperatingSystem How-to Linux
---

## OS crash course
*my dump of files from into to OS*

|Linux Layers:             | |                                               |
|--------------------------|-|-----------------------------------------------|
|Ring 0 = Kernel           | |                    Most Priviledged           |
|Ring 1 = Device Driver    | |                                               |
|Ring 2 = Device Driver    | |                                               |
|Ring 3 = user/application | |                    Least Priviledged          |


<h2>Virtual File System</h2>

* /dev = device nodes, which gives user space access to the device drivers in your OS's running kernel.<br><br>
two types of device files: **block device** and **character device**.
  * block devices 
    +  = storage devices (large or fixed size). e.g disks, RAM, cdroms.<br>
    + = userland and block device is mediated by a subsystem. these subsystem prepare/buffer necessary reources. e.g keeping read data in cache first.<br>
  * character device 
    + = slow devices which operates as read/write (doesn't require frequent seek queries) e.g Keyboard, serial ports.
    + = system calls go directly to device drivers. <br><br>
**not all devices in /dev are hardware devices**<br>
e.g /dev/null or /dev/zero = write or reading never returns any data.

```bash
$ ls -l /dev
crw-r--r-- 1 root root     10, 235 Jun 16 10:30 autofs  # c means char device ; 10 is major and 235 is minor
brw-rw---- 1 root disk      1,   0 Jun 16 10:30 ram0    # b means block device ; 1 is major and 0 is minor
....
```
* /proc = information about system and hardware. also it is being used as a medium between userland and kernel
  
```bash
/proc/PID/cmdline       # Command line arguments
/proc/PID/cwd           # Link to the current working directory
/proc/PID/fd            # Directory of file descriptors
/proc/PID/maps          # Memory maps to executables and library files
/proc/PID/mem           # Memory held by this process
/proc/PID/stat          # Process status
/proc/PID/statm	        # Process memory status information
/proc/PID/status        # Process status in human readable form
/proc/PID/wchan         # it shows the task is blocked in - or “0” if not blocked
```

reference: <br>
[/proc kernel.org](https://www.kernel.org/doc/html/latest/filesystems/proc.html) <br>
[troubleshooting using /proc](https://tanelpoder.com/2013/02/21/peeking-into-linux-kernel-land-using-proc-filesystem-for-quickndirty-troubleshooting/)



<h2>Process</h2>
Process is a piece of code that are loaded into memory and will be resourced by CPU. Each process has a unique identifier called 'PID'. <br>
 Three kinds of process in systems:<br>
 + Daemons - process in the background, like services <br>
 + Console - console applications which will be bound to a terminal with active monitoring of its stdout/stderr<br>
 Graphic - display and a window manager<br>

each process has 2 stacks = user and kernel<br>
user = for variables for instruction for user data<br>
kernel = auto variable or functions<br>
top half - critical work interrupts, such as saving register, unmasking..<br>
bottom half - workqueue<br>

OS knows which systemcall to use via systemcall number<br>
process state: new ready blocked running ~> zombie <br>
timeslice cpu. = 100ms<br>
disadvatgae of cpu context switch - tlb needs to be reloaded, processor pipeline flush.<br>
```

     (look for env)
parent -> fork(child) ---------------------child finishes
                      L parent (sleep/wait)------------------------parent active (process end)
```
